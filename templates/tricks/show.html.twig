{% extends 'base.html.twig' %}

{% block title tricks.name %}

{% block body %}

<div class="container">
    <div class="text-center" style="margin-top: 50px;">
        <h1>{{ tricks.name }}</h1>
    </div>

    <hr>

    <div>
        {% include 'includes/source.html.twig' %}
    </div>

    <div class="container mt-4">
        <p>Description: {{ tricks.content }}</p>
        <p>Category: {{ tricks.category }}</p>
    </div>

    <hr>


    {% if tricks.comments|length > 0 %}
        <h2 class="mb-3">Comments</h2>
        {% for comment in tricks.comments %}
            <div class="bg-light rounded mb-3 py-3 px-3">
                <strong>{{ comment.author.username }}</strong> say :
                <blockquote>
                    {{ comment.content }}
                </blockquote>

                {% if app.user and app.user == comment.author %}
                <a href="{{ path('comment.delete', {'id': comment.id}) }}" class="btn btn-danger" style="float: right;">
                    <i class="fas fa-trash"></i>
                </a>
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <h2>This tricks don't have comments</h2>
    {% endif %}

    {% if app.user %}

    {{ form_start(form) }}
    {{ form_widget(form) }}
    <button type="submit" class="btn btn-success">Send</button>
    {{ form_end(form) }}

    {% endif %}
</div>

{% endblock %}
